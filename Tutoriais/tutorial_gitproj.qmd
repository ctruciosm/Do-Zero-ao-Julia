---
title: "Introdu√ß√£o ao Git e projetos colaborativos"
description: "Nesse tutorial est√£o presentes conceitos e exemplos em abund√¢ncia. Vem dar uma olhada! Aproveite pra ficar sabendo sobre dicas e boas pr√°ticas colaborativas."
categories:
  - "DEV"
author:
  - name: Heitor Brotto
    affiliation: "Universidade Estadual de Campinas"
    url: https://github.com/brotto-go
    orcid: 0009-0008-2081-0357
date: "2025-05-21"
image: imagens/git-animation.gif
lang: pt-br
format:
  html:
    theme: [cosmo, estilos\style_hbgs.scss]
    toc: true
    toc-depth: 3
    self-contained: false
draft: true
---


<!-- 
Nota: O p√∫blico alvo desse tutorial s√£o os pr√≥prios desenvolvedores do 
      projeto.

      As principais motiva√ß√µes por tr√°s da produ√ß√£o desse tutorial s√£o:
      
      (1): Oferecer um material introdut√≥rio ao Git para os membros atuais 
      e futuros. 
      
      A ideia √© facilitar o aprendizado de quem se interessar em entender
      como funcionam os processos que permitem a colabora√ß√£o acontecer por 
      meio do Git;
      
      (2): Introduzir um guia de boas pr√°ticas, o "Conventional Commit";
      
      (3): E formar um conjunto de v√°rios exemplos de formata√ß√£o, exibindo
      uma amostra extensa do que √© poss√≠vel se fazer com o Quarto.
-->

## Introdu√ß√£o

`git` √© uma ferramenta essencial para desenvolvedores, mas muitos iniciantes acham seu funcionamento misterioso. Neste tutorial, vamos mostrar como o `git` pode ser seu aliado no controle de vers√£o de projetos. Se voc√™ j√° se perguntou "Por que meu c√≥digo parou de funcionar depois dessa mudan√ßa?", o Git √© a resposta!

## Git & GitHub

### Qual a diferen√ßa?

O `git` √© um sistema de controle de vers√£o e seu principal servi√ßo s√£o os reposit√≥rios `git` --- instalado em um computador, ele cria e atualiza um hist√≥rico sobre os arquivos de um reposit√≥rio de interesse, permitindo revisitar uma mesma parte desses arquivos em diferentes momentos no tempo.

O [GitHub](https://github.com) √© uma plataforma que conecta reposit√≥rios `git` e os hospeda dentro de seus servidores.[^1]

[^1]: Existem outros sites que prop√µem o mesmo tipo de servi√ßo (*eg.* GitLab e Bitbucket)

<br>

### Git

Sendo mais espec√≠fico, o `git` √© um software livre, distribu√≠do sob os termos da vers√£o 2 da GNU General Public License e criado em 2005 por Linus Torvalds para o desenvolvimento do `Linux`.

Seus reposit√≥rios oferecem ferramentas de controle e administra√ß√£o completa de arquivos digitais, isso inclui funcionalidades como hist√≥rico, registro de auditoria, interface de revis√£o e conta com operabilidade independende de acesso a uma rede *internet*.

Inicializa√ß√£o de uma inst√¢ncia do git:
```bash
git init
```

### Hub

J√° o GitHub √© uma plataforma de hospedagem de arquivos e projetos, em especial c√≥digos-fonte, com ferramentas de controle de vers√£o integradas usando o `git`; para al√©m disso, ele conta com *features* colaborativas (como *pull requests* e *issues*).

De certa forma ela se parece com uma rede social para c√≥digos e programadores, nela √© poss√≠vel:

* Criar reposit√≥rios/projetos online, de car√°ter p√∫blico ou mesmo privado
* Interagir com outros colaboradores por meio de [*pull requests*](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/about-pull-requests) (PR)
* Acompanhar [*issues*](https://docs.github.com/en/issues/tracking-your-work-with-issues/about-issues) ao discutir ideias, propor melhorias, reportar bugs e afins

<br>

## Instala√ß√£o

Essa se√ß√£o assume que o procedimento de instala√ß√£o deva ser carregado pelo leitor do post; o processo de instala√ß√£o deve levar o sistema operacional da m√°quina em considera√ß√£o.

Endere√ßo *web*:

* [Git](https://git-scm.com/downloads)

## Ambiente

Uma vez instalado √© poss√≠vel abrir o terminal `bash`[^2] na maioria dos diret√≥rios da sua m√°quina!

[^2]: "GNU Bash ou simplesmente Bash √© um interpretador de comandos, um entre os diversos tradutores entre o usu√°rio e o sistema operacional conhecidos como shell." -- [pt.wikipedia.org](https://pt.wikipedia.org/wiki/Bash)

![Imagem do terminal *Git bash* aberto na √°rea de trabalho do Windows](imagens\terminal_gitbash1.gif){style="float:right;" fig-alt="(X) Falha no carregamento da imagem" width="25em"}

Escolha o diret√≥rio que preferir e experimente criar uma pasta; vamos testar as funcionalidades a seguir.

Supondo que o nome da sua pasta seja `<pasta>`

1. Abra a `<pasta>`
2. Aperte {{< kbd MOUSE2 >}} [^3] sobre o espa√ßo vazio da pasta
3. Selecione a op√ß√£o "Open Git Bash here"

[^3]: Bot√£o direito do mouse

Ou alternativamente, abra a `<pasta>` e {{< kbd Shift+F10 >}} + {{< kbd S >}} + {{< kbd ENTER >}}

## Principais Comandos

### Ciclo b√°sico

<br>

### `git init`

Partindo desse comando podemos inicializar uma nova inst√¢ncia do git dentro do diret√≥rio `<pasta>`, de modo a transform√°-lo num reposit√≥rio `git`. Se esse comando for executado em uma pasta que j√° √© um reposit√≥rio, ent√£o a inst√¢ncia do git ser√° reinicializada.

Ao digitar a seguinte linha de c√≥digo e pressionar {{< kbd ENTER >}}, o comando √© executado pelo terminal `bash`.

```bash
git init
```

::: {.border}
```
Initialized empty Git repository in C:/Users/User/Desktop/teste/.git/
```
:::

::: {.callout-caution collapse="true"}
## *Did you know?*

Um detalhe interessante √© que podemos visualizar essa inst√¢ncia dentro do reposit√≥rio; se voc√™ estiver acompanhando os exemplos √© prov√°vel que note que a `<pasta>` est√° aparentemente vazia --- no entanto agora existe um objeto oculto dentro dela.

Supondo que o sistema operacional do leitor seja Windows

1. No Windows Explorer, na `<pasta>`, clique na aba "Exibir"
2. No grupo Mostrar/ocultar marque a *checkbox* "Itens ocultos"

O resultado desse procedimento deve se parecer com a seguinte imagem:

![*Git bash* e um novo item `.git` na `<pasta>`](imagens\terminal_gitbash2.gif){style="float:left;" fig-alt="(X) Falha no carregamento da imagem" width="25em"}

::: {.justify_p}
`.git` √© o objeto que vigia tudo o que acontece dentro da `<pasta>` e organiza todas as opera√ß√µes internas de controle. Se ele for apagado da lixeira, as informa√ß√µes que ele coletou s√£o perdidas.
:::

::: {.justify_p}
Vale ressaltar que junto a inicializa√ß√£o do reposit√≥rio, o `git` tamb√©m criou uma primeira *branch* (t√≥pico mais avan√ßado) chamada `master` (ela costuma se chamar `main` ou `master` a depender do que o `git` escolher).
:::

:::

<br>

### `git status`

No dia a dia, se `<pasta>` √© um diret√≥rio frequentemente utilizado numa m√°quina, ent√£o √© natural esperar que regularmente sejam criados/alterados/movidos arquivos para dentro da `<pasta>`; num caso como esse, um controlador[^4] pode se perguntar:

[^4]: Usu√°rio de `git` que esteja trabalhando num reposit√≥rio local.

> Como est√£o os arquivos do meu reposit√≥rio, quais alterei, quais exclu√≠?

Num caso como esse, o estado mais recente do reposit√≥rio com respeito aos seus arquivos pode ser informado pelo comando `git status`.

```bash
git status
```

::: {.border}
```
On branch master

No commits yet

Untracked files:
  (use "git add <file>..." to include in what will be committed)
        script.js
        index.html

nothing added to commit but untracked files present (use "git add" to track)
```
:::

O relat√≥rio entregue pelo `git status` informa o estado de cada arquivo dentro do reposit√≥rio na *branch* ativa (nesse caso a `master`) at√© o presente momento.

Todo arquivo n√£o adicionado a fila de espera pelo controlador √© rotulado como "n√£o rastreado" --- uma vez adicionado a fila, ele passa a ser rotulado como "rastreado".

::: {.callout-caution collapse="true"}
## Exemplos de manipula√ß√£o de arquivos

Os dois arquivos `script.js` e `index.html` informados pela sa√≠da do terminal anterior s√£o objetos que podem ser obtidos a partir dos exemplos a seguir, e de fato, o s√£o.

Vale ressaltar que num reposit√≥rio frequentemente utilizado, os arquivos criados/alterados/movidos n√£o precisam ser manupilados da mesma maneira que nos exemplos apresentados a seguir.

Nada nos impediria de, por exemplo, criar blocos de notas[^longnote] vazios na `<pasta>` e ent√£o alterar seus nomes e suas extens√µes para `script.js` e `index.html`. Isso teria o mesmo efeito que o resultado final dos exemplos a seguir.

[^longnote]: ![](imagens\notepad_logo.PNG){width="2em"} -- Bloco de notas Windows

    √â um arquivo do tipo `.txt`, mas qualquer tipo de arquivo serviria para o prop√≥sito do exemplo.

#### Alguns comandos do `bash`:

#### `touch` e `ls`

No pr√≥prio terminal `bash` envie as linhas do primeiro bloco de c√≥digo 

```bash
touch index.html
ls
```

::: {.border}
```
index.html
```
:::

`touch` e `ls` s√£o dois comandos `bash`; o primeiro cria um arquivo `.html` vazio e o segundo inspeciona o conte√∫do da `<pasta>` (exceto arquivos ocultos). O segundo bloco corresponde a sa√≠da esperada.

#### `mkdir` e `mv`

Tamb√©m √© poss√≠vel criar pastas e mover arquivos usando os comandos `mkdir` e `mv`, seguem exemplos:

```bash
mkdir foo
mv index.html foo
ls
```

::: {.border}
```
foo/
```
:::

#### `cd`

Tamb√©m √© poss√≠vel acessar pastas dentro (ou fora) da `<pasta>` usando `cd` para navegar entre os diret√≥rios. A tag `..` indica que `cd` deve acessar a pasta pai do diret√≥rio atual.

Um detalhe um pouco estranho do `mv` √© que tamb√©m podemos renomear arquivos com ele; se movermos um arquivo n.¬∞1 "para dentro" de um arquivo n.¬∞2 que n√£o existe no diret√≥rio atual, ent√£o o n.¬∞1 tem o nome e extens√£o (mas n√£o o conte√∫do) substitu√≠dos pelo n.¬∞2.

Isso tamb√©m vale para arquivos n.¬∞2 que j√° existam no diret√≥rio atual mas cuidado, isso sobrescreve os conte√∫dos do arquivo n.¬∞2.

```bash
cd foo
touch script.html
cd ..
mv ~/Desktop/teste/foo/* ~/Desktop/teste/
mv script.html script.js
ls
```

::: {.border}
```
script.js
foo/
index.html
```
:::

Note que esses s√£o os arquivos reportados pelo `git status` (pastas n√£o s√£o consideradas como arquivos).
:::

<br>

### `git add` e `git restore` `(git rm)`

A respeito da adi√ß√£o de arquivos a fila de espera temos o comando `git add` como principal forma de rastrear arquivos e preparalos para commit (gravar o estado da `<pasta>`).

√â poss√≠vel adicionar cada arquivo individualmente:

```bash
git add index.html
```

Ou utilizar a tag `.` para indicar que todos os arquivos n√£o rastreados devem ser rastreados.

```bash
git add .
git status
```

::: {.border}
```
On branch master

No commits yet

Changes to be committed:
  (use "git rm --cached <file>..." to unstage)
        new file:   script.js
        new file:   index.html
```
:::

Caso uma a√ß√£o de rastreamento precise ser desfeita: √© poss√≠vel retirar um arquivo da fila de espera (restaur√°-lo) por meio do comando `git restore --staged`

```bash
git restore --staged script.js
```

::: {.border}
```
fatal: could not resolve HEAD
```
:::

Por√©m no caso em que n√£o haja nenhum commit salvo dentro do reposit√≥rio, n√£o h√° nenhum ponto pro qual o `git` possa restaurar seu arquivo via `git restore`; nesse caso o pr√≥prio `git` indica o uso do comando `git rm` como alternativa, por meio da *tag* `--cached`.

```bash
git rm --cached script.js
```

::: {.border}
```
rm 'script.js'
```
:::

::: {.callout-note collapse="true"}
## Mais sobre o `git restore`

Um pequeno detalhe sobre o `git restore` √© que quando nenhuma *tag* √© informada, dizemos ao terminal `bash` que queremos reverter um arquivo de volta √† vers√£o do √∫ltimo commit, vulgo a vers√£o desse mesmo arquivo que est√° salva no commit mais recente.

A *tag* `--staged` indica que o `git restore` deve "reverter" um arquivo da fila de espera de volta √† vers√£o fora da fila, mas isso n√£o altera o conte√∫do do arquivo, como faz o `git restore` sem nenhuma *tag*.
:::

<br>

### `git commit`

A pe√ßa final do ciclo b√°sico consiste do `git commit`, ele √© respons√°vel por arquivar todas as informa√ß√µes rastreadas num envelope e as lacrar com um n√∫mero de identifica√ß√£o, informa√ß√µes do controlador respons√°vel, data e hora do disparo, etc.

Mas sua import√¢ncia n√£o se limita s√≥ ao controle visto at√© aqui; o controle *offline* de pastas para o uso pessoal de um controlador j√° √© uma ferramenta de grande ajuda mas, como se bem sabe, sites como o GitHub podem reunir colaboradores para trabalharem juntos no desenvolvimento de um mesmo reposit√≥rio.

Isso torna o `git commmit` uma ferramenta de grande responsabilidade.

Principalmente porque ao trabalhar em equipe, comunica√ß√£o clara e procedimentos padronizados melhoram a efici√™ncia dos resultados; e o `git commit` √© a principal forma de registrar com precis√£o cada avan√ßo do projeto como um todo, se qualquer problema vir a acontecer e precisar ser resolvido r√°pido, ent√£o colocar informa√ß√µes descritivas e eficientes nos seus commits ir√° poupar muito tempo e trabalho desnecess√°rios.

Por√©m para falarmos de `git commit`, precisamos nos identificar primeiro, por meio de 

<hr>

#### `git config`

Se tent√°ssemos criar um `commit` sem nos identificar (sem identificar o controlador), ir√≠amos nos deparar com o seguinte tipo de erro:

::: {.border}
```
Author identity unknown

*** Please tell me who you are.

Run

  git config --global user.email "you@example.com"
  git config --global user.name "Your Name"

to set your account's default identity.
Omit --global to set the identity only in this repository.

fatal: unable to auto-detect user name
fatal: unable to auto-detect email address 
```
:::

Seguindo as pr√≥pias instru√ß√µes no erro, podemos configurar um usu√°rio e email para esse (ou todos os futuros) reposit√≥rio(s) usando a *tag* `--global`, mas se quisermos nos identificar somente no reposit√≥rio atual basta n√£o digitar essa *tag* e seguir o exemplo oferecido pelo erro reportado.

```bash
git config user.email "<email>"
git config user.name "<usu√°rio>"
```

<hr><br>

Na sequ√™ncia seguem exemplos do uso de `git commit`. A *tag* `-m` indica que a *string* digitada logo em seguida do comando deve ser usada como t√≠tulo do `commit`.

```bash
git commit -m "chore(site): init"
```
::: {.border}
```
[master (root-commit) d84f2f1] chore(site): init
 1 file changed, 1 insertion(+)
 create mode 100644 index.html
```
:::

Agora, caso seja preciso prover informa√ß√µes detalhadas que extrapolem o tamanho oferecido pela *tag* `-m` (72 caract√©res), ent√£o podemos usar a *tag* `-F` que ao inv√©s de uma mensagem, ela indica para o `git commit` que a *string* digitada na sequ√™ncia ser√° o nome de um arquivo de tipo textual e cujo conte√∫do dever√° ser usado para formar uma descri√ß√£o com t√≠tulo (dado pela primeira linha do arquivo e ainda limita a 72 caract√©res) e paragrafos (todo o restante do conte√∫do textual).

Logo abaixo temos um exemplo de arquivo do tipo `.txt` (tipos textuais incluem `.txt`, `.md` e similares)

::: {.border}
![](imagens\notepad_logo.PNG){style="padding-left: 0.7em;" fig-alt="(X)" width="1.6em"} f.txt - Bloco de Notas
:::

::: {.border}
```
feat: ferramenta de busca interna

Introduz uma barra de pesquisa na barra de navega√ß√£o

A ferramenta procura por qualquer palavra em todas as p√°ginas do site.
```
:::

Utilizando a *tag* `-F` e o arquivo `f.txt` criado na `<pasta>`, podemos:

```bash
git add script.js
git commit -F f.txt
```
::: {.border}
```
[master 8428d85] feat: ferramenta de busca interna
 1 file changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 script.js
```
:::

:::{.callout-tip appearance="minimal"}
## Considera√ß√µes Finais

<br>

Note que todo ferramental desenvolvido at√© ent√£o permite o controle de arquivos de maneira totalmente *offline*!! A √∫nica etapa que normalmente precisa de uma rede *internet* √© a instala√ß√£o do git; de resto, tudo que fizemos at√© ent√£o poderia ter sido feito com uma m√°quina fora de uma rede.
:::

::: {.callout-caution collapse="true"}
## Estrutura de uma rede de colaboradores

```{dot}
digraph reposit√≥rio {
  layout=neato
  node[shape=circle, fixedsize=true, width=0.8]; A; B; C; D; E; F; 
  node[shape=circle, fixedsize=true, style="filled", fillcolor="purple:pink", width=0.8]; G; 
  node[shape=circle, fixedsize=true, style="", label="",width=0.8]; H;
  A->G
  B->G
  C->G
  D->G
  E->G
  F->G
}
```

::: {.centered_p}
Representa√ß√£o de um projeto colaborativo entre reposit√≥rios A-F e um reposit√≥rio n√£o identificado
:::

## Estrutura

Logo acima est√° um grafo orientado que pode ajudar na compreens√£o da estrutura de uma rede de colaboradores, por exemplo, hospedada na plataforma GitHub.

* Os n√≥dulos representam reposit√≥rios `git`
* As setas representam comunica√ß√£o concedida entre reposit√≥rios

Podemos distinguir os reposit√≥rios em dois tipos relevantes:

1. Os que permitem outros reposit√≥rios comunicarem consigo
2. E os que n√£o permitem. 

O reposit√≥rio `G`, destacado entre os demais reposit√≥rios, √© um exemplo do caso n.¬∞ 1. Todos os outros s√£o exemplos do caso n.¬∞ 2.

::: {.justify_p}
O que faz `G` ser diferente dos outros reposit√≥rios √© que ele est√° em um servidor e possui uma arquitetura desenvolvida para permitir que outros reposit√≥rios se comuniquem com ele, ao inv√©s de estar em uma m√°quina usual como os outros reposit√≥rios. 
:::

::: {.justify_p}
* Entende-se que todo reposit√≥rio pode se comunicar com outro (desde que se identifique e cumpra os requisitos para estabelecer conex√£o), mas nem todo reposit√≥rio permite que outros comuniquem consigo (porque n√£o tem estrutura pra isso ou n√£o concederam permiss√£o).
:::

### Moral da hist√≥ria?

::: {.justify_p}
Por causa das caracter√≠sticas levantas, se uma plataforma hospeda um reposit√≥rio `G`, ent√£o qualquer reposit√≥rio com acesso a rede e permiss√£o pode copiar todos os arquivos de `G`, fazer altera√ß√µes numa *branch* local, e atualizar os arquivos de `G` por uma nova vers√£o desenvolvida.
:::

::: {.justify_p}
O detalhe est√° no fato que todos os reposit√≥rios s√£o objetos diferentes (isso inclui `G` e todos os dos colaboradores), no entanto como cada reposit√≥rio pode obter uma c√≥pia exata dos arquivos de um mesmo repost√≥rio `G`; se supormos que existe uma forma de atualizar os arquivos de `G` sem que haja conflito entre os bin√°rios, ent√£o isso significa que todos os colaboradores podem virtualmente trabalhar ao mesmo tempo num mesmo projeto.
:::
:::

<br>

### Ciclo n√£o b√°sico

Ser√£o introduzidos nessa se√ß√£o alguns comandos `git` mais sofisticados e que saltam para o controle *online* de arquivos; dando in√≠cio a discuss√£o sobre trabalho colaborativo. 

Se o leitor quiser acompanhar os exemplos que usam reposit√≥rios hospedados mais adiante, por exemplo por meio do GitHub, fique a vontade; mas uma nota: para utilizar os comandos `git pull` e `git push` √© preciso validar uma *token* de seguran√ßa. O processo n√£o √© muito complicado mas GitHub n√£o √© o foco desse *post*.

<br>

### `git log`

A come√ßar pelo `git log`: Embora o comando `git log` n√£o seja excepcionalmente avan√ßado, o contexto em que voc√™ o usa normalmente √©; isso porque quando √© preciso usar `git log`, significa que existem coisas que provavelmente pararam de funcionar ou est√£o quebradas..

De modo que seja natural esperar que o controlador j√° tenha feito diversos `commit`'s e j√° tenha uma experi√™ncia salvando o progresso de seus reposit√≥rios.  

```bash
git log
```
::: {.border}
```
commit 8428d85fd052e83b2ce6cb5af41a1af1acadb60a (HEAD -> master)
Author: <usu√°rio> <email>
Date:   Mon May 12 05:24:34 2025 -0300

    feat: ferramenta de busca interna

    Introduz uma barra de pesquisa na barra de navega√ß√£o

    A ferramenta procura por qualquer palavra em todas as p√°ginas do site.

commit d84f2f1ebf82772361a1315d8472047ae3fffe16
Author: <usu√°rio> <email>
Date:   Mon May 12 04:21:31 2025 -0300

    chore: init
```
:::

[^9]

[^9]: `HEAD` √© um ponteiro utilizado pelo `git` para indicar/falar da *branch* ativa (no caso de `(HEAD -> master)`, a palavra `HEAD` literalmente aponta para a *branch* ativa).

Uma alternativa ao `git log` consiste em usar a *tag* `--oneline`, essa vers√£o oferece um relat√≥rio m√≠nimo que apresenta o t√≠tulo de cada `commit` e o in√≠cio do c√≥digo *hash*[^6].

[^6]:O *hash* √© um identificador √∫nico para cada `commit` em um reposit√≥rio `git`

```bash
git log --oneline
```
::: {.border}
```
8428d85 (HEAD -> master) feat: ferramenta de busca interna
d84f2f1 chore: init
```
:::

:::{.callout-note collapse="true"}
## Detalhes

Vale ressaltar que esse comando tem diversas op√ß√µes de personaliza√ß√£o para o relat√≥rio gerado, de modo que seja poss√≠vel escolher com extrema precis√£o quais informa√ß√µes dos `commit`'s devem aparecer no relat√≥rio. Nem o pr√≥prio `git log` exibe absolutamente todas as informa√ß√µes a respeito de cada `commit`.
:::

<br>

### `git remote`

Podemos fazer uma analogia entre o `git remote` e uma agenda de contatos, para introduzirmos um reposit√≥rio nessa agenda podemos usar o comando `git remote add`; esse comando indica ao terminal que as pr√≥ximas duas *strings* digitadas ser√£o respectivamente o nome/apelido de um reposit√≥rio e o endere√ßo *web* desse mesmo reposit√≥rio.

```bash
git remote add <apelido-pro-reposit√≥rio> <endere√ßo-web-do-reposit√≥rio>
```

Seguindo essa analogia, o comando `git remote` ir√° exibir um relat√≥rio com todos os "contatos" adicionados pelo `git remote add`.

```bash
git remote
```
::: {.border}
```
<apelido-pro-reposit√≥rio>
```
:::

A partir de agora, `<remote>` se refere ao apelido de um reposit√≥rio hospedado gen√©rico.

<br>

### `git pull`

Esse e o pr√≥ximo comando s√£o os principais vetores de troca/envio de arquivos entre reposit√≥rios local e hospedado.

Uma vez que o endere√ßo *web* de um reposit√≥rio esteja na lista de reposit√≥rios remotos (`git remote`), √© poss√≠vel pedir ao hospedado pela c√≥pia dos seus arquivos utilizando o comando `git pull`:

```bash
git pull
```

Executar esse comando num reposit√≥rio que j√° possui arquivos ter√° o mesmo efeito[^7]; os arquivos que j√° estavam no reposit√≥rio permanecem intocados (salvo substitui√ß√µes, causada por arquivos com nomes iguais aos do reposit√≥rio hospedado) e os arquivos copiados s√£o simplesmente adicionados.

[^7]: Isso √© bem mais complicado do que parece.

:::{.callout-caution collapse="true"}
## Detalhes

## Bem importantes

A partir de agora √© preciso falar sobre *branches*. Caso tenha acompanhado os exemplos at√© aqui, voc√™ deve ter notado que frequentemente a palavra `master` aparecia por a√≠ nas sa√≠das dos terminais; acontece que isso √© o nome da *branch* em que estamos trabalhando, se voc√™ tiver reparado logo no in√≠cio dos exemplos, a *branch* `master` tinha sido criada no instante que o reposit√≥rio foi inicializado.

Isso porque sempre que trabalhamos num reposit√≥rio `git` n√≥s na verdade estamos trabalhando em uma √°rea de trabalho do reposit√≥rio `git`, chamada de ramifica√ß√£o.

> T√° mas o que raios isso significa?

Pois bem, uma ramifica√ß√£o √© uma esp√©cie de √°rea de trabalho virtual criada dentro dos reposit√≥rio git. Quando um reposit√≥rio √© inicializado, uma dessas √°reas √© automaticamente criada e costumamente se chama `master` ou `main`; elas agora ser√£o chamadas genericamente de `<branch>`.

√â poss√≠vel criar e manipular `<branch>`'s mas vamos nos ater as explica√ß√µes sobre o `git pull`.

A forma completa do comando √© `git pull <remote> <branch>`, isso porque o `git` precisa saber de qual `<branch>` do reposit√≥rio hospedado (`<remote>`) voc√™ quer copiar os dados; note que como o reposit√≥rio hospedado na verdade tamb√©m √© um reposit√≥rio git, ent√£o ele mesmo pode ter v√°rias `<branch>`'s (üß†) e por isso √© necess√°rio dizer explicitamente quem voc√™ quer copiar de dentro do reposit√≥rio hospedado.

### Moral da hist√≥ria

Caso voc√™ execute o comando `git pull` sem cosiderar esses detalhes, √© poss√≠vel que ele exiba um erro questionando qual `<branch>` voc√™ quer copiar.

Mas se no reposit√≥rio hospedado houver apenas uma `<branch>`, ent√£o o comando deve executar de forma bem sucedida, copiando os arquivos para a `<branch>` ativa no seu reposit√≥rio.

<br>

## Ainda Mais

:::{.callout-warning collapse="true" icon=false}
## Detalhes

## Por√©m n√£o t√£o importantes

Na verdade o comando `git pull` √© de certa forma a execu√ß√£o em sequ√™ncia de outros dois comandos, sendo eles os comandos `git fetch` e `git rebase` (ou `git merge`). Ele √© um comando inteligente que avalia os par√¢metros juntos a sua execu√ß√£o e determina qual a sequ√™ncia de comandos deve ser executada.

Ent√£o o `git pull` de fato n√£o √© algo t√£o simples assim; fundamentalmente ele √© composto por comandos bem sofisticados.

Tanto √© que o caso descrito pelo √∫ltimo par√°grafo antes de <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cone-striped" viewBox="0 0 16 16"><path d="m9.97 4.88.953 3.811C10.159 8.878 9.14 9 8 9s-2.158-.122-2.923-.309L6.03 4.88C6.635 4.957 7.3 5 8 5s1.365-.043 1.97-.12m-.245-.978L8.97.88C8.718-.13 7.282-.13 7.03.88L6.275 3.9C6.8 3.965 7.382 4 8 4s1.2-.036 1.725-.098m4.396 8.613a.5.5 0 0 1 .037.96l-6 2a.5.5 0 0 1-.316 0l-6-2a.5.5 0 0 1 .037-.96l2.391-.598.565-2.257c.862.212 1.964.339 3.165.339s2.303-.127 3.165-.339l.565 2.257z"/></svg> **Detalhes** s√≥ √© poss√≠vel gra√ßas a essa sofistica√ß√£o: o problema √© tratado por meio do `git merge`; que √© necess√°rio para copiar os arquivos de uma `<branch>` de um `<remote>` para a `<branch-ativa>` de um reposit√≥rio local, sem excluir os arquivos que j√° estavam presentes na `<branch-ativa>` antes da execu√ß√£o do `git pull`.
:::
:::

Seguem exemplos:

Se tivermos um reposit√≥rio vazio ou rec√©m criado, ent√£o ao adicionar um `<remote>` via `git remote add` e executar `git pull`; os par√¢metros `<remote>` e`<branch>` do `git pull` ser√£o exigidos. 

Para um `<remote>` chamado `origin` e uma `<branch>` chamada `master`, ter√≠amos:

```bash
git remote add origin <endere√ßo-web-do-reposit√≥rio>
git pull origin master
```

Caso nosso reposit√≥rio local j√° contenha arquivos, como o diret√≥rio `<pasta>` desenvolvido nos exemplos anteriores, executar o comando `git pull` exigir√° os seus par√¢metros e possivelmente a *tag* `--allow-unrelated-histories`[^8].

[^8]: A execu√ß√£o do `git pull` no caso onde n√£o existe hist√≥rico em comum entre as duas `<branch>`'s (n√£o possuem um `commit` ancestral em comum) √© barrada por padr√£o.

Normalmente o `git pull` √© executado na situa√ß√£o em que os conte√∫dos das `<branch>`'s j√° foram iguais em algum ponto no tempo mas eventualmente divergiram em projetos separados ou em projeto principal e uma *feature* em desenvolvimento.

A seguir temos o resultado do `git pull` entre a `<branch-ativa>` do reposit√≥rio local `<pasta>` e a `<branch>` `master` de um `<remote>` `origin`.

```bash
git remote add origin <endere√ßo-web-do-reposit√≥rio>
git pull --allow-unrelated-histories origin master
git log --oneline
```

::: {.border}
```
9fd1243 (HEAD -> master) Merge branch 'master' of <endere√ßo-web-do-reposit√≥rio>
8428d85 feat: ferramenta de busca interna
d84f2f1 chore: init
67e90d6 (origin/master, origin/HEAD)
f259d48 Update README.md
84521e2 Update README.md

           .
           .
           .

d0c682a Update README.md
39eb2a8 Update README.md
072d50a Initial commit
```
:::

:::{.callout-note appearance="minimal"}
A `master` do `<remote>` no exemplo anterior consiste de v√°rios `commit`'s sobre um mesmo arquivo `README.md`, representando atualiza√ß√µes.
:::

<br>

### `git push`

Ao executar o comando 

```bash
git push -u <remote> <branch>
```

V√°rias coisas acontecem, mas o principal:

* O estado da `<sua-branch>` ativa (onde voc√™ executou o comando `git push`) √© copiado para a `<branch>` do `<remote>`; isso inclui (1): o `commit` mais recente da `<sua-branch>`, que equivale ao estado atual dos arquivos da `<sua-branch>` no seu reposit√≥rio local e (2): as informa√ß√µes de todos os `commit`'s passados da `<sua-branch>`.

* E (3): a informa√ß√£o de rastreamento para controle automatizado; esse √∫ltimo √© bem mais sutil e a *tag* `-u` √© a respons√°vel por capturar essa informa√ß√£o e a enviar com a execu√ß√£o do `git push`.

As informa√ß√µes em (1) e (2) s√£o enviadas invariavelmente mas a informa√ß√£o em (3) n√£o, ent√£o por que a enviamos?

A "informa√ß√£o de rastreamento para controle automatizado" √© um jarg√£o pra falar sobre a captura do nome da `<branch>` que o comando `git push` est√° copiando.

Essa informa√ß√£o √© √∫til ao `git` (e a n√≥s) se quisermos automatizar o processo de dizer ao `git pull` qual `<branch>` do `<remote>` queremos copiar; sem essa informa√ß√£o ter√≠amos que dizer essas informa√ß√µes manualmente e em todas as vezes que o execut√°ssemos. Isso √© especialmente √∫til para um colaborador que sempre copia e altera uma mesma `<branch>` do `<remote>`.

A pr√≥pia *tag* `-u` √© uma abrevia√ß√£o para `--set-upstream`, que numa tradu√ß√£o livre se traduz para "configurar durante o envio".

Na pr√°tica isso quer dizer que, dado uma `<branch>` chamada `master` e o apelido `origin` para um reposit√≥rio hospedado, podemos substituir o processo:

```bash
git pull origin master
```

```bash
git push origin master
```

Por

```bash
git pull
```

```bash
git push -u origin master
```

:::{.callout-warning collapse="true"}
## Complica√ß√µes

Convido o leitor a imaginar o seguinte cen√°rio: Num projeto `git` simples (`<remote>` possui uma √∫nica `<branch>`) com colaboradores `A`,`B` e `C`, dado que num instante $t_0$ o estado do reposit√≥rio local de cada colaborador √© igual ao estado do `<remote>` (e portanto iguais entre si):

* Se `A` faz um `push` dum `commit` `C1` num instante $t_1$;
* `B` e `C` fazem um `pull` num instante $t_2$;
* `B` faz um `push` dum `commit` `C2` num instante $t_3$;
* `C` faz um `push` dum `commit` `C3` num instante $t_4$;

E sabendo que $t_0\leq t_1\leq t_2\leq t_3\leq t_4$.

Qual o estado dos arquivos do `<remote>`? Essa sequ√™ncia de a√ß√µes sequer acontece corretamente?

:::{.callout-note collapse="true" appearance="minimal"}
## Pense um pouco antes

## Resultados

Assumindo que o comando `git push` simplesmente copia o estado dos arquivos duma `<branch>` local para `<branch>` dum `<remote>`; ent√£o seria razo√°vel esperar que as mudan√ßas feitas pelo colaborador `B` foram apagadas (ou sobrescritas) pelo `commit` `C3` do colaborador `C`.

Mas esse n√£o √© o caso! O `git push` √© um comando inteligente que identifica se estado da `<branch>` do `<remote>` n√£o coincide com `C1` (mudou para `C2`) e aborta a execu√ß√£o do comando. Para resolver esse problema √© preciso que o colaborador `C` execute um `pull` antes do `push`; dessa forma ao inv√©s de apagar as mudan√ßas de `B`, as mundan√ßas feitas por `C` s√£o adicionadas as mudan√ßas de `B`.

Uma √∫ltima complica√ß√£o acontece caso os `commit`'s `C2` e `C3` mudarem um mesmo arquivo; ou seja, os `commit`'s `C2` e `C3` s√£o dois conjuntos n√£o disjuntos de mudan√ßas no reposit√≥rio.

Se esse for o caso, quando o colaborador `C` executar o segundo `pull`, duas situa√ß√µes podem acontecer:

1. O `git` vai reconhecer quais arquivos compartilham mudan√ßas e tentar√° performar um `merge` autom√°tico no conte√∫do alterado nas duas vers√µes
2. Se o `git` encontrar uma mesma parte de um mesmo arquivo escrita de forma diferente em cada vers√£o o `git` ir√° lhe questionar qual das duas partes deve ser mantida, ie se deve ser mantida a vers√£o proposta em `C2` ou `C3` (ou mesmo).

### Exemplos

Exemplo da situa√ß√£o n.¬∞ 1: 

```bash
git pull origin master
```

::: {.border}
```
(...)

Auto-merging index.html
[KMerge made by the 'ort' strategy.
 index.html | 2 [32m++[m
 1 file changed, 2 insertions(+)
```
:::

```bash
git push origin master
```

<br>

Exemplo da situa√ß√£o n.¬∞ 2: 

```bash
git pull origin master
```

::: {.border}
```
(...)

Auto-merging index.html
CONFLICT (content): Merge conflict in index.html
Automatic merge failed; fix conflicts and then commit the result.
```
:::

O conte√∫do do arquivo `index.html` foi alterado na √°rea de conflito (pelo `git`) de forma a indicar quais s√£o as mudan√ßas  e de onde cada uma vem, observe:

::: {.border}
![](imagens\notepad_logo.PNG){width="1.6em" style="padding-left: 0.7em"} index.html - Bloco de Notas
:::

::: {.border}
```
<<<<<<< HEAD
<h2> Sample Subheader </h2>
=======
<p> Sample Text </p>
>>>>>>> fb509f553318697e0c4b67344194b30eb50a7fc4
```
:::

Esse texto estranho serve pra distinguir a vers√£o proposta localmente pelo seu `commit` `C3`, indicado por `HEAD`; e a vers√£o proposta pelo `commit` `C2`, indicado pelo `hash` de `C2`. Substituir toda a estrutura criada por uma, ou outra vers√£o, ou at√© uma outra completamente diferente, ir√° dizer ao `git` que o colaborador `C` estudou o problema e decidiu que essa vers√£o √© a mais apropriada dado o que ele fez e o que j√° foi feito.

Exemplo de resolu√ß√£o de conflito:

::: {.border}
![](imagens/notepad_logo.PNG){width="1.6em" style="padding-left: 0.7em"} index.html - Bloco de Notas
:::

::: {.border}
```
<h1> Sample Header </h1>

<p> Sample Text </p>

<a href="http://www.ime.unicamp.br/~juliacps/">Conhe√ßa o projeto!</a>
```
:::

Depois √© preciso adicionar o novo arquivo via `add` e ent√£o salv√°-lo via `git commit`. Detalhe importante: esse `commit` n√£o pode conter nenhum par√¢metro! A forma correta para indicar fim da corre√ß√£o do conflito √© simplesmente `git commit`.

```bash
git add index.html
```

```bash
git commit
```

::: {.border}
```
(...)

[K[master 973b71e] Merge branch 'master' of <endere√ßo-web-do-reposit√≥rio>
```
:::

Por fim

```bash
git push origin master
```

:::

:::

:::{.callout-tip appearance="minimal"}

## Considera√ß√µes Finais

<br>

Pode ser um pouco frustrante absorver os √∫ltimos conceitos/exemplos mas isso √© normal: por tr√°s dos comandos `git pull` e `git push` est√£o outros comandos mais complicados que acontecem o tempo todo; sem ter uma m√≠nima ideia do que significa fazer um `merge` ou o que √© uma `<branch>`, √© esperado que haja uma certa dificuldade.

Mas introduzir at√© os m√≠nimos detalhes sobre os comandos [`git branch`](https://git-scm.com/docs/git-branch) ou [`git merge`](https://git-scm.com/docs/git-merge) n√£o √© algo necess√°rio. Eles s√£o complicados e exigem ainda mais esfor√ßo pra se entender; fora o fato que ao trabalhar em um projeto simples (com uma √∫nica `<branch>` no `<remote>`), os comandos `git pull` e `git push` bastam. Eles s√£o comandos inteligentes que guiam o controlador at√© o desfecho desejado. 

E para al√©m disso: existem ferramentas, como os projetos de controle de vers√£o do Rstudio, que automatizam at√© mesmo os `pull`'s antes da execu√ß√£o dos `push`'s; e caso exista entre os colaboradores de um projeto simples um acordo para que todos os `commit` sejam disjuntos, ent√£o nunca haver√° problema de conflinto entre `push`'s! (dado que `git pull` seja executado ao √≠nicio de toda nova sess√£o de trabalho)

Ao fim desse tutorial introdut√≥rio ao `git` est√£o t√≥picos adicionais com mais detalhes a respeito da ferramenta oferecida pelo Rstudio e outras curiosidades.

:::

<br>

## T√≥picos Adicionais

### `.Rproj`

Sabia que n√£o √© preciso aprender sobre `git merge` e `git branch` pra necessariamente trabalhar em equipe utilizando o GitHub? O software Rstudio permite essa colabora√ß√£o por meio da sua interface que integra o ambiente de desenvolvimento convencional do Rstudio ao `git`!

Uma explica√ß√£o detalhada sobre os projetos de Controle de Vers√£o no Rstudio se encontra [nesse endere√ßo *web*](https://docs.posit.co/ide/user/ide/guide/tools/version-control.html)

A interface combina as principais ferramentas do `git` e as funcionalidades do Rstudio; nela voc√™ pode trabalhar nos arquivos do reposit√≥rio hospedado como se estivesse num projeto usual do Rstudio.

√â preciso ter o `git` instalado e com as cred√™nciais v√°lidas caso o projeto esteja hospedado no GitHub (ou GitLab).

Certifique-se de dar `pull` dos arquivos do reposit√≥rio hospedado sempre que come√ßar sua nova sess√£o de treabalho! Clique no bot√£o *Pull* para fazer isso.

As opera√ß√µes do `git` s√£o as mesmas: ao alterar/criar algum arquivo, essas mudan√ßas s√£o registradas na aba "hist√≥rico" e ent√£o quando seus trabalhos estiverem prontos, basta clicar em `commit`, marcar as *checkbox*'s para adicionar as mudan√ßas a fila de espera, e disparar o `commit` confirmando a op√ß√£o novamente.

√â poss√≠vel enviar os `commit`'s ao reposit√≥rio hospedado clicando no bot√£o *Push* da interface.

<br>

### *Conventional Commits*

As descri√ß√µes dos `commit`'s em um projeto s√£o muito valiosas aos colaboradores se forem eficientes em transmitir as informa√ß√µes relevantes
sobre as mudan√ßas presentes nos mesmos. *Conventional Commits* √© nome dado a um conjunto de boas pr√°ticas e regras simples para a escrita dessas descri√ß√µes.

Algumas de suas finalidades s√£o tornar o hist√≥rico do `git` mais leg√≠vel e estipular um padr√£o de escrita com o prop√≥sito de automatizar a tarefa de gerar *changelogs*/versionar arquivos.

Estrutura b√°sica de um `C.C.`:

::: {.border}
```
<tipo>(<escopo opcional>): <descri√ß√£o breve>

<corpo opcional>

<rodap√© opcional>
```
:::

Os `<tipo>`'s de `C.C.`

* `feat`: Adicionam ou removem um novo recurso √† API ou UI
* `fix`: Corrigem um bug de API ou UI de um commit de feat anterior
* `refactor`: Reescrevem/reestruturam seu c√≥digo, mas n√£o alteram o comportamento da API ou UI
* `perf`: Commits de refatora√ß√£o especiais, que melhoram o desempenho
* `style`: N√£o afetam o significado (espa√ßos em branco, formata√ß√£o, ponto e v√≠rgula ausentes, etc.)
* `test`: Adicionam testes ausentes ou corrigem testes existentes
* `docs`: Afetam apenas a documenta√ß√£o
* `build`: Afetam componentes de build, como ferramentas de build, depend√™ncias, vers√£o do projeto, pipelines de CI, ...
* `ops`: Afetam componentes operacionais como infraestrutura, implanta√ß√£o, backup, recupera√ß√£o, ...
* `chore`: Diversos, n√£o classificados, por exemplo, modificar .gitignore

`<descri√ß√£o>`

* Frase curta no imperativo (eg. "`add`" em vez de "`added`"), sem ponto final.

`<escopo opcional>`

* Indica o m√≥dulo/√°rea afetada (eg. `feat(login):` ou `fix(api):`).

`<corpo opcional>`

* Detalhes sobre as mudan√ßas, justificativas ou impactos.

`<rodap√© opcional>`

* Usado para indicar *breaking changes* (eg. `BREAKING CHANGE: altera formato da resposta da API`) ou refer√™ncias (eg. `Closes #123`).

Refer√™ncias e mais detalhes podem ser encontrados nesses endere√ßos *web*:

* [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/)
* [conventional-commits-cheatsheet.md](https://gist.github.com/qoomon/5dfcdf8eec66a051ecd85625518cfd13#scopes)

<br>

::: {.callout-note} 
Ferramentas de IA foram utilizadas para corre√ß√£o ortogr√°fica e aprimoramento do texto.
:::

